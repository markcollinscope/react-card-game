{"ast":null,"code":"const URLBASE = 'https://deckofcardsapi.com/api/deck/';\nconst SHUFFLE = 'new/shuffle/?deck_count=1';\nconst DRAWONE = '/draw/?count=1';\n\nconst deckApiFetchJson = async request => {\n  let response = await fetch(URLBASE + request);\n  let json = await response.json();\n  if (!json.success) throw new Error(\"Fetch API Error - Bye!\"); // console.log(\"deckApiFetchJson:\", json);\n\n  return json;\n};\n\nconst assertHasValue = value => {\n  if (!value) throw new Error(\"Assertion Error: \", value);\n  return value;\n};\n\nassertHasValue(true);\n\nclass Card {\n  constructor(c) {\n    this.image = () => this.image;\n\n    this.value = () => this.value;\n\n    this.suit = () => this.suit;\n\n    this.code = () => this.code;\n\n    this.image = assertHasValue(c.image);\n    this.value = assertHasValue(c.value);\n    this.suit = assertHasValue(c.suit);\n    this.code = assertHasValue(c.code);\n  }\n\n}\n\nclass DeckOfCards {\n  constructor() {\n    this.deckId = undefined;\n    this.lastCard = {\n      deck_id: \"abcd\"\n    };\n\n    this.doChecks = (full = false) => {\n      if (this.deckId === undefined || full && this.lastCard === undefined) throw new Error(\"DeckOfCard - must request newDeck() and draw()\");\n    };\n\n    this.newDeck = async () => {\n      let json = await deckApiFetchJson(SHUFFLE);\n      this.deckId = json.deck_id; // console.log(\"newDeck:\", this.deckId, this.lastCard);\n\n      return this.deckId;\n    };\n  }\n\n  async drawCard() {\n    this.doChecks(false);\n    this.lastCard = await deckApiFetchJson(this.deckId + DRAWONE);\n    return this.lastCard;\n  }\n\n}\n\nDeckOfCards.values = {\n  \"2\": 2,\n  \"3\": 3,\n  \"4\": 4,\n  \"5\": 5,\n  \"6\": 6,\n  \"7\": 7,\n  \"8\": 8,\n  \"9\": 9,\n  \"0\": 10,\n  \"JACK\": 10,\n  \"QUEEN\": 10,\n  \"KING\": 10,\n  \"ACE\": 11\n};\nlet deck = new DeckOfCards();\nexport default deck;","map":{"version":3,"sources":["/home/mark/GIT/GITHUB/react-card-game/src/cardapi.js"],"names":["URLBASE","SHUFFLE","DRAWONE","deckApiFetchJson","request","response","fetch","json","success","Error","assertHasValue","value","Card","constructor","c","image","suit","code","DeckOfCards","deckId","undefined","lastCard","deck_id","doChecks","full","newDeck","drawCard","values","deck"],"mappings":"AAAA,MAAMA,OAAO,GAAG,sCAAhB;AACA,MAAMC,OAAO,GAAG,2BAAhB;AACA,MAAMC,OAAO,GAAG,gBAAhB;;AAEA,MAAMC,gBAAgB,GAAG,MAAOC,OAAP,IACzB;AACC,MAAIC,QAAQ,GAAG,MAAMC,KAAK,CAACN,OAAO,GAAGI,OAAX,CAA1B;AACA,MAAIG,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAT,EAAjB;AAEA,MAAI,CAAEA,IAAI,CAACC,OAAX,EAAoB,MAAM,IAAIC,KAAJ,CAAU,wBAAV,CAAN,CAJrB,CAMC;;AAEA,SAAOF,IAAP;AACA,CAVD;;AAYA,MAAMG,cAAc,GAAIC,KAAD,IACvB;AACC,MAAK,CAACA,KAAN,EAAc,MAAM,IAAIF,KAAJ,CAAU,mBAAV,EAA+BE,KAA/B,CAAN;AACd,SAAOA,KAAP;AACA,CAJD;;AAKAD,cAAc,CAAC,IAAD,CAAd;;AAEA,MAAME,IAAN,CAAW;AACVC,EAAAA,WAAW,CAACC,CAAD,EACX;AAAA,SAOAC,KAPA,GAOQ,MAAM,KAAKA,KAPnB;;AAAA,SAQAJ,KARA,GAQQ,MAAM,KAAKA,KARnB;;AAAA,SASAK,IATA,GASO,MAAM,KAAKA,IATlB;;AAAA,SAUAC,IAVA,GAUO,MAAM,KAAKA,IAVlB;;AACC,SAAKF,KAAL,GAAaL,cAAc,CAACI,CAAC,CAACC,KAAH,CAA3B;AACM,SAAKJ,KAAL,GAAaD,cAAc,CAACI,CAAC,CAACH,KAAH,CAA3B;AACA,SAAKK,IAAL,GAAYN,cAAc,CAACI,CAAC,CAACE,IAAH,CAA1B;AACA,SAAKC,IAAL,GAAYP,cAAc,CAACI,CAAC,CAACG,IAAH,CAA1B;AACN;;AAPS;;AAeX,MAAMC,WAAN,CACA;AAAA;AAAA,SACCC,MADD,GACUC,SADV;AAAA,SAECC,QAFD,GAEY;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAFZ;;AAAA,SAoBCC,QApBD,GAoBY,CAACC,IAAI,GAAC,KAAN,KACX;AACC,UAAK,KAAKL,MAAL,KAAgBC,SAAhB,IAA8BI,IAAI,IAAI,KAAKH,QAAL,KAAkBD,SAA7D,EACC,MAAM,IAAIX,KAAJ,CAAU,gDAAV,CAAN;AACD,KAxBF;;AAAA,SA0BCgB,OA1BD,GA0BW,YACV;AACC,UAAIlB,IAAI,GAAG,MAAMJ,gBAAgB,CAACF,OAAD,CAAjC;AACA,WAAKkB,MAAL,GAAcZ,IAAI,CAACe,OAAnB,CAFD,CAIC;;AAEA,aAAO,KAAKH,MAAZ;AACA,KAlCF;AAAA;;AAoCe,QAARO,QAAQ,GACd;AACC,SAAKH,QAAL,CAAc,KAAd;AAEA,SAAKF,QAAL,GAAgB,MAAMlB,gBAAgB,CAAC,KAAKgB,MAAL,GAAcjB,OAAf,CAAtC;AACA,WAAO,KAAKmB,QAAZ;AACA;;AA1CF;;AADMH,W,CAKES,M,GAAS;AACf,OAAK,CADU;AAEf,OAAK,CAFU;AAGf,OAAK,CAHU;AAIf,OAAK,CAJU;AAKf,OAAK,CALU;AAMf,OAAK,CANU;AAOf,OAAK,CAPU;AAQf,OAAK,CARU;AASf,OAAK,EATU;AAUf,UAAQ,EAVO;AAWf,WAAS,EAXM;AAYf,UAAQ,EAZO;AAaf,SAAO;AAbQ,C;AAyCjB,IAAIC,IAAI,GAAG,IAAIV,WAAJ,EAAX;AACA,eAAeU,IAAf","sourcesContent":["const URLBASE = 'https://deckofcardsapi.com/api/deck/'\nconst SHUFFLE = 'new/shuffle/?deck_count=1'\nconst DRAWONE = '/draw/?count=1'\n\nconst deckApiFetchJson = async (request) =>\n{\n\tlet response = await fetch(URLBASE + request);\n\tlet json = await response.json();\n\n\tif (! json.success) throw new Error(\"Fetch API Error - Bye!\");\n\t\n\t// console.log(\"deckApiFetchJson:\", json);\n\n\treturn json;\n}\n\nconst assertHasValue = (value) => \n{\n\tif ( !value ) throw new Error(\"Assertion Error: \", value);\n\treturn value;\n}\nassertHasValue(true);\n\nclass Card {\n\tconstructor(c)\n\t{\n\t\tthis.image = assertHasValue(c.image);\n        this.value = assertHasValue(c.value);\n        this.suit = assertHasValue(c.suit);\n        this.code = assertHasValue(c.code);\n\t}\n\n\timage = () => this.image;\n\tvalue = () => this.value;\n\tsuit = () => this.suit;\n\tcode = () => this.code;\n}\n\nclass DeckOfCards \n{\n\tdeckId = undefined;\n\tlastCard = { deck_id: \"abcd\" };\n\n\tstatic values = {\n\t\t\"2\": 2,\n\t\t\"3\": 3,\n\t\t\"4\": 4,\n\t\t\"5\": 5,\n\t\t\"6\": 6,\n\t\t\"7\": 7,\n\t\t\"8\": 8,\n\t\t\"9\": 9,\n\t\t\"0\": 10,\n\t\t\"JACK\": 10,\n\t\t\"QUEEN\": 10,\n\t\t\"KING\": 10, \n\t\t\"ACE\": 11\n\t}\n\n\tdoChecks = (full=false)  =>\n\t{\n\t\tif ( this.deckId === undefined || (full && this.lastCard === undefined) )\n\t\t\tthrow new Error(\"DeckOfCard - must request newDeck() and draw()\");\n\t}\n\n\tnewDeck = async () =>\n\t{\n\t\tlet json = await deckApiFetchJson(SHUFFLE);\n\t\tthis.deckId = json.deck_id;\n\t\t\n\t\t// console.log(\"newDeck:\", this.deckId, this.lastCard);\n\t\n\t\treturn this.deckId;\n\t}\n\n\tasync drawCard()\n\t{\n\t\tthis.doChecks(false);\n\n\t\tthis.lastCard = await deckApiFetchJson(this.deckId + DRAWONE);\n\t\treturn this.lastCard;\n\t}\n}\n\nlet deck = new DeckOfCards();\nexport default deck;\n"]},"metadata":{},"sourceType":"module"}