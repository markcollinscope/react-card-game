{"ast":null,"code":"// TODO await timeouts?\nimport { assert } from './utils';\nimport Card from './Card';\nconst URLBASE = 'https://deckofcardsapi.com/api/deck/';\nconst SHUFFLEONE = 'new/shuffle/?deck_count=1';\nconst DRAWONE = '/draw/?count=1';\nexport default class DeckAPI {\n  constructor() {\n    this.deckId = undefined;\n    this.lastCard = undefined;\n\n    this.doApiFetchJson = async (request) => {\n      let response = await fetch(URLBASE + request);\n      let json = await response.json();\n      if (!json.success) throw new Error(\"Fetch API Error - Bye!\");\n      return json;\n    };\n\n    this.doChecks = (full = false) => {\n      if (this.deckId === undefined) throw new Error(\"DeckOfCard - must call newDeck()\");\n      if (full && this.lastCard === undefined) throw new Error(\"DeckOfCard - must call drawCard()\");\n    };\n\n    this.newDeck = async () => {\n      let json = await this.doApiFetchJson(SHUFFLEONE);\n      this.deckId = json.deck_id;\n      return this.deckId;\n    };\n\n    this.id = () => {\n      this.doChecks(false);\n      return this.deckId;\n    };\n\n    this.drawCard = async () => {\n      this.doChecks(false);\n      let jsonCards = await this.doApiFetchJson(this.deckId + DRAWONE);\n      assert(this.deckId === jsonCards.deck_id, \"same deck\");\n      this.lastCard = new Card(jsonCards.cards[0]);\n      return this.lastCard;\n    };\n  }\n\n}","map":{"version":3,"sources":["/home/mark/GIT/GITHUB/react-card-game/src/DeckAPI.js"],"names":["assert","Card","URLBASE","SHUFFLEONE","DRAWONE","DeckAPI","deckId","undefined","lastCard","doApiFetchJson","request","response","fetch","json","success","Error","doChecks","full","newDeck","deck_id","id","drawCard","jsonCards","cards"],"mappings":"AAAA;AACA,SAASA,MAAT,QAAuB,SAAvB;AAEA,OAAOC,IAAP,MAAiB,QAAjB;AAEA,MAAMC,OAAO,GAAK,sCAAlB;AACA,MAAMC,UAAU,GAAI,2BAApB;AACA,MAAMC,OAAO,GAAK,gBAAlB;AAEA,eAAe,MAAMC,OAAN,CACf;AAAA;AAAA,SACCC,MADD,GACUC,SADV;AAAA,SAECC,QAFD,GAEYD,SAFZ;;AAAA,SAICE,cAJD,GAIkB,OAAOC,OAAP,KACjB;AACC,UAAIC,QAAQ,GAAG,MAAMC,KAAK,CAACV,OAAO,GAAGQ,OAAX,CAA1B;AACA,UAAIG,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAT,EAAjB;AAEA,UAAI,CAAEA,IAAI,CAACC,OAAX,EAAoB,MAAM,IAAIC,KAAJ,CAAU,wBAAV,CAAN;AAEpB,aAAOF,IAAP;AACA,KAZF;;AAAA,SAcCG,QAdD,GAcY,CAACC,IAAI,GAAC,KAAN,KACX;AACC,UAAK,KAAKX,MAAL,KAAgBC,SAArB,EACC,MAAM,IAAIQ,KAAJ,CAAU,kCAAV,CAAN;AAED,UAAKE,IAAI,IAAI,KAAKT,QAAL,KAAkBD,SAA/B,EACC,MAAM,IAAIQ,KAAJ,CAAU,mCAAV,CAAN;AACD,KArBF;;AAAA,SAuBCG,OAvBD,GAuBW,YACV;AACC,UAAIL,IAAI,GAAG,MAAM,KAAKJ,cAAL,CAAoBN,UAApB,CAAjB;AACA,WAAKG,MAAL,GAAcO,IAAI,CAACM,OAAnB;AAEA,aAAO,KAAKb,MAAZ;AACA,KA7BF;;AAAA,SA+BCc,EA/BD,GA+BM,MACL;AACC,WAAKJ,QAAL,CAAc,KAAd;AACA,aAAO,KAAKV,MAAZ;AACA,KAnCF;;AAAA,SAqCCe,QArCD,GAqCY,YACX;AACC,WAAKL,QAAL,CAAc,KAAd;AAEA,UAAIM,SAAS,GAAG,MAAM,KAAKb,cAAL,CAAoB,KAAKH,MAAL,GAAcF,OAAlC,CAAtB;AACAJ,MAAAA,MAAM,CAAE,KAAKM,MAAL,KAAgBgB,SAAS,CAACH,OAA5B,EAAqC,WAArC,CAAN;AAEA,WAAKX,QAAL,GAAgB,IAAIP,IAAJ,CAAUqB,SAAS,CAACC,KAAV,CAAgB,CAAhB,CAAV,CAAhB;AACA,aAAO,KAAKf,QAAZ;AACA,KA9CF;AAAA;;AAAA","sourcesContent":["// TODO await timeouts?\nimport { assert } from './utils';\n\nimport Card from './Card';\n\nconst URLBASE \t\t= 'https://deckofcardsapi.com/api/deck/';\nconst SHUFFLEONE \t= 'new/shuffle/?deck_count=1';\nconst DRAWONE \t\t= '/draw/?count=1';\n\nexport default class DeckAPI\n{\n\tdeckId = undefined;\n\tlastCard = undefined;\n\n\tdoApiFetchJson = async (request) =>\n\t{\n\t\tlet response = await fetch(URLBASE + request);\n\t\tlet json = await response.json();\n\n\t\tif (! json.success) throw new Error(\"Fetch API Error - Bye!\");\n\t\t\n\t\treturn json;\n\t}\n\n\tdoChecks = (full=false)  =>\n\t{\n\t\tif ( this.deckId === undefined )\n\t\t\tthrow new Error(\"DeckOfCard - must call newDeck()\");\n\n\t\tif ( full && this.lastCard === undefined ) \n\t\t\tthrow new Error(\"DeckOfCard - must call drawCard()\");\n\t}\n\n\tnewDeck = async () =>\n\t{\n\t\tlet json = await this.doApiFetchJson(SHUFFLEONE);\n\t\tthis.deckId = json.deck_id;\n\t\t\n\t\treturn this.deckId;\n\t}\n\n\tid = () =>\n\t{\n\t\tthis.doChecks(false);\n\t\treturn this.deckId;\n\t}\n\n\tdrawCard = async () => \n\t{\n\t\tthis.doChecks(false);\n\n\t\tlet jsonCards = await this.doApiFetchJson(this.deckId + DRAWONE);\n\t\tassert( this.deckId === jsonCards.deck_id, \"same deck\" );\n\n\t\tthis.lastCard = new Card (jsonCards.cards[0]);\n\t\treturn this.lastCard;\n\t}\n}\n\n"]},"metadata":{},"sourceType":"module"}